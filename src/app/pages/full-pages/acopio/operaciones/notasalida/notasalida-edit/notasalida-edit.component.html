<form class="needs-validation" [formGroup]="notaSalidaFormEdit">
  <section id="tooltip-validation">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header" style="margin-bottom: 2rem;">
            <!--   <form class="needs-validation" [formGroup]="consultaMateriaPrimaFormEdit"> -->

            <div class="row">
              <div class="col-12 col-md-8">
                <div class="card-title-empresa">{{login.Result.Data.RazonSocialEmpresa}}</div>
                <div class="card-subtitle-empresa">{{login.Result.Data.DireccionEmpresa}}</div>
                <div class="card-subtitle-empresa">RUC: {{login.Result.Data.RucEmpresa}}
                </div>
              </div>
              <div class="col-12 col-md-4">

                <div class="form-row">

                  <div class="col-md-6 form-group">
                    <label class="card-forms" for="users-edit-name">N° NOTA DE SALIDA</label>
                  </div>

                  <div class="col-md-6 form-group">

                    <div class="form-group" style="margin-bottom: 0.5rem !important;">
                      <div class="controls">
                        <input type="text" id="users-edit-username" formControlName="numNotaSalida"
                          class="form-control" aria-invalid="false"
                          [ngClass]="{ 'is-invalid': submittedEdit && fedit.numNotaSalida.invalid, 'is-valid': submittedEdit && !fedit.numNotaSalida.invalid }">

                      </div>
                    </div>

                  </div>
                </div>
                <div class="form-row">

                  <div class="col-md-6 form-group">
                    <label class="card-forms" for="users-edit-email">FECHA</label>
                  </div>
                  <div class="col-md-4 form-group">
                    <label class="card-forms" for="users-edit-username" style="font-weight: bold;"></label>
                  </div>
                </div>
                <div class="form-row">

                  <div class="col-md-6 form-group">
                    <label class="card-forms" for="users-edit-email">ALMACEN</label>
                  </div>
                  <div class="col-md-4 form-group">
                    <label class="card-forms" for="users-edit-username" style="font-weight: bold;"></label>
                  </div>
                </div>
              
              </div>

            </div>

           <!-- <div class="row"
              style="margin-right: 6rem; margin-left: 6rem; text-align: center; margin-top: 2rem; background-color: #975AFF; border-top-left-radius: 0.35rem; border-top-right-radius: 0.35rem;">
              <div class="card-subtitle-form">DATOS DEL PROVEEDOR</div>
            </div>-->

            <div class="row" style="margin-right: 6rem; margin-left: 6rem; margin-top: 4rem;">
              <div class="col-12 col-md-5">
                <label for="basicInput">Destinatario</label>
                <input type="text" class="form-control" id="basicInput" formControlName="destinatario" disabled>
                <label for="basicInput">Ruc</label>
                <input type="text" class="form-control" id="basicInput" formControlName="ruc" disabled>

              </div>
              <div class="col-12 col-md-2" style="padding-left: 0cm;">
               <ng-template #modalLotes let-c="close" let-d="dismiss">
                  <div class="modal-header" style="text-align: center;">

                    <h4 class="modal-title" style="font-size: 1rem;">Bandeja de Lotes</h4>
                    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <form [formGroup]="consultaLotes" class="needs-validation"
                      style="padding-left: 0.3rem; padding-right: 0.3rem;">
                      <ngx-spinner></ngx-spinner>
                      <div class="row"
                        style="text-align: center;background-color: #975AFF; border-top-left-radius: 0.35rem; border-top-right-radius: 0.35rem;">
                        <div class="card-subtitle-form modal-title">Criterios de Busqueda</div>
                      </div>
                      <div class="row">
                        <div class="col-12 col-md-5">
                          <div class="form-group row">
                            <label for="validationTooltip08" class="col-md-3 col-form-label card-text2">N° de
                              Lote</label>
                            <div class="col-md-9">
                              <input type="text" minlength="8" maxlength="20" formControlName="numeroLote"
                                class="form-control" id="validationTooltip08" placeholder="Numero de Lote"
                                [ngClass]="{ 'is-invalid': submitted && f.numeroLote.invalid, 'is-valid': submitted && !f.numeroLote.invalid }">
                            </div>
                          </div>

                          <div class="form-group row">
                            <label for="validationTooltip08" class="col-md-3 col-form-label card-text2">Fecha de
                              Inicio</label>
                            <div class="col-md-9">
                              <input type="date" class="form-control" formControlName="fechaInicio" id="validationTooltip07"
                              name="fechaInicio" placeholder="date" date [ngClass]="{ 'is-invalid': submitted && f.fechaInicio.invalid, 
                              'is-valid': submitted && !f.fechaInicio.invalid }"/>
                            </div>

                          </div>
                          <div class="form-group row">
                            <label for="validationTooltip08" class="col-md-3 col-form-label card-text2">Fecha
                              Final</label>
                            <div class="col-md-9">
                              <input type="date" class="form-control" formControlName="fechaFinal" id="validationTooltip07"
                              name="fechaFinal" placeholder="date" date [ngClass]="{ 'is-invalid': submitted && f.fechaFinal.invalid, 
                              'is-valid': submitted && !f.fechaFinal.invalid }"/>
                            </div>

                          </div>
                          <div class="form-group row" style="margin-top: 1rem">
                            <label for="validationTooltip05" class="col-md-3 col-form-label card-text2">ESTADO</label>
                            <div class="col-md-9">
                              <ng-select [items]="listaEstado" bindLabel="name" [(ngModel)]="selectEstado"
                                class="form-control" placeholder="Seleccionar Estado" formControlName="estado"
                                 bindLabel="Label" bindValue="Codigo"
                                [ngClass]="{ 'is-invalid': submittedEdit && f.estado.invalid, 'is-valid': submittedEdit && !f.estado.invalid }">
                              </ng-select>
                            </div>
                          </div>
                          <div class="form-group row" style="margin-top: 1rem">
                            <label for="validationTooltip05" class="col-md-3 col-form-label card-text2">TIPO</label>
                            <div class="col-md-9">
                              <ng-select [items]="listaProducto" bindLabel="name" [(ngModel)]="selectProducto"
                                class="form-control" placeholder="Seleccionar Tipo" formControlName="producto"
                                (change)="changeSubProducto($event)" bindLabel="Label" bindValue="Codigo"
                                [ngClass]="{ 'is-invalid': submittedEdit && f.producto.invalid, 'is-valid': submittedEdit && !f.producto.invalid }">
                              </ng-select>
                            </div>
                          </div>

                          <div class="form-group row" style="margin-top: 1rem">
                            <label for="validationTooltip05" class="col-md-3 col-form-label card-text2">SUB TIPO</label>
                            <div class="col-md-9">

                              <ng-select [items]="listaSubProducto" bindLabel="name" [(ngModel)]="selectSubProducto"
                                formControlName="subproducto" bindLabel="Label" bindValue="Codigo" class="form-control"
                                placeholder="Seleccionar Sub Tipo"
                                [ngClass]="{ 'is-invalid': submittedEdit && fedit.subproducto.invalid, 'is-valid': submittedEdit && !fedit.subproducto.invalid }">
                              </ng-select>


                            </div>
                          </div>



                        </div>
                        <div class="col-12 col-md-7">
                          <div class="form-group row">
                            <label for="validationTooltip01" class="col-md-3 col-form-label card-text2">Tipo
                              Doc.</label>
                            <div class="col-md-9">
                              <ng-select [items]="listaTipoDocumento" formControlName="tipoDocumento" bindLabel="Label"
                                bindValue="Codigo" id="validationTooltip01" placeholder="Seleccionar Tipo Doc."
                                [ngClass]="{ 'is-invalid': submitted && f.tipoDocumento.invalid, 'is-valid': submitted && !f.tipoDocumento.invalid }"
                                [(ngModel)]="selectedTipoDocumento">
                              </ng-select>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="validationTooltip08" class="col-md-3 col-form-label card-text2">Numero
                              Doc.</label>
                            <div class="col-md-9">
                              <input type="text" minlength="8" maxlength="20" formControlName="numeroDocumento"
                                class="form-control" id="validationTooltip08" placeholder="Numero Documento"
                                [ngClass]="{ 'is-invalid': submitted && f.numeroDocumento.invalid, 'is-valid': submitted && !f.numeroDocumento.invalid }">
                              <small class="form-text text-muted danger"
                                *ngIf="f.numeroDocumento.errors?.minlength">Ingrese 8 a 20
                                letras</small>
                              <small class="form-text text-muted danger"
                                *ngIf="f.numeroDocumento.errors?.maxlength">Ingrese 8 a 20
                                letras</small>
                            </div>

                          </div>
                          <div class="form-group row" style="margin-top: 1rem;">
                            <label for="validationTooltip08" class="col-md-3 col-form-label card-text2">Socio</label>
                            <div class="col-md-9">
                              <input id="validationTooltip08" type="text" class="form-control" formControlName="socio"
                                name="first-name" placeholder="Codigo de Socio"
                                [ngClass]="{ 'is-invalid': submitted && f.socio.invalid, 'is-valid': submitted && !f.socio.invalid }">
                            </div>
                          </div>
                          <div class="form-group row">
                            <label class="col-md-3 col-form-label card-text" for="validationTooltip09">Nombre/Rz.
                              Social</label>
                            <div class="col-md-9">
                              <input type="text" class="form-control" id="validationTooltip09"
                                formControlName="rzsocial" placeholder="Nombre o Rz. Social"
                                [ngClass]="{ 'is-invalid': submitted && f.rzsocial.invalid, 'is-valid': submitted && !f.rzsocial.invalid }"
                                name="first-name">
                            </div>
                          </div>
                          <div class="form-group row" style="margin-top: 1rem">
                            <label for="validationTooltip05" class="col-md-3 col-form-label card-text2">Almacen</label>
                            <div class="col-md-9">
                              <ng-select #ngSelectComponent id="validationTooltip05" [items]="listaAlmacen"
                                [(ngModel)]="selectAlmacen" formControlName="almacen" bindLabel="Label"
                                bindValue="Codigo" placeholder="Seleccionar Almacen"
                                [ngClass]="{ 'is-invalid': submitted && f.almacen.invalid, 'is-valid': submitted && !f.almacen.invalid }">
                              </ng-select>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-12">
                          <div class="row">
                            <div class="col-md-10">
                              <small class="form-text text-muted danger"
                                *ngIf="errorGeneral.isError">{{errorGeneral.errorMessage}}</small>
                            </div>
                            <div class="col-md-2">
                              <button class="btn btn-primary mr-1 mb-1" type="submit" (click)="buscar()">Buscar</button>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-12">
                          <fieldset class="form-group">
                            <label style="font-size: 0.6rem;">Show
                              <select name="users-list-select" style="font-size: 0.8rem;"
                                class="form-control form-control-sm d-inline-block width-100 p-right-25 pl-4 mx-1"
                                (click)="updateLimit($event)">
                                <option value="10">10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                              </select>
                              entries</label>
                            <label for="ngx-filter-ref" class="float-right" style="font-size: 0.6rem;">Search:
                              <input id="ngx-filter-ref"
                                class="form-control form-control-sm d-inline-block width-200 ml-1" type="text"
                                (keyup)="filterUpdate($event)" />
                            </label>
                          </fieldset>
                          
                       <ngx-datatable class="bootstrap core-bootstrap ngx-datatable-proveedor" #tableLotes
                            [columnMode]="ColumnMode.force" [headerHeight]="50" [footerHeight]="50" rowHeight="auto"
                            [limit]="limitRef" [rows]="rows" style="font-size: 0.8rem;"
                            [selectCheck]="singleSelectCheck" [selected]="selected" [selectionType]="'single'" >
                            <ngx-datatable-column name="N° Lote" prop="Numero" width="30">
                             <ng-template let-row="row" let-name="value" ngx-datatable-cell-template>

                                <div class="d-flex align-items-center">
                                  <div class="cell-line-height">
                                    {{ name }}
                                  </div>
                                </div>

                            </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Almacen" prop="Almacen" width="20">
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Peso Neto" prop="TotalKilosNetosPesado" width="40">
                            </ngx-datatable-column>
                            <ngx-datatable-column name="% Rendimiento Promedio" prop="PromedioRendimientoPorcentaje" width="60">
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Estado" prop="Estado" width="25">
                            </ngx-datatable-column>
                           
                          </ngx-datatable>
                        </div>
                      </div>

                    </form>
                  </div>
                </ng-template>
               <button type="button" (click)="openModal(modalLotes)" class="btn btn-default"
                  style="margin-top: 1.5rem;">
                  <i class="fa fa-search"></i>
                </button>
              </div>
              <div class="col-12 col-md-5">
                <label for="basicInput">Direccion de Partida</label>
                <input type="text" class="form-control" id="basicInput" formControlName="dirPartida" disabled>
                <label for="basicInput">Direccion de Destino</label>
                <input type="text" class="form-control" id="basicInput" formControlName="dirDestino" disabled>
              </div>
            </div>

            <!--           </form> -->
          </div>
        </div>
      </div>
    </div>

  </section>
  <section class="users-edit">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-content">
            <div class="card-body">
              <!-- Nav-tabs -->
              <ul ngbNav #nav="ngbNav" [activeId]="1" [destroyOnHide]="false" class="nav-pills justify-content-left">
                <li [ngbNavItem]="1" [destroyOnHide]="true">
                  <a ngbNavLink class="nav-link d-flex align-items-center">
                    <span class="d-none d-sm-block">Nota de Salida</span>
                  </a>
                  <ng-template ngbNavContent>
                    <app-tagNotasalida></app-tagNotasalida>
                  </ng-template>
                </li>
                <li [ngbNavItem]="2">
                  <a (click)="emitEventToChild()" ngbNavLink
                    [class]="'nav-link d-flex align-items-center'">
                    <span class="d-none d-sm-block">Control de Calidad</span>
                  </a>
                  <ng-template ngbNavContent>
                    <app-controlCalidadSeco></app-controlCalidadSeco>
                  </ng-template>
                </li>
              </ul>
              <div class="tab-content">
                <div [ngbNavOutlet]="nav"></div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <div class="d-flex justify-content-between align-items-center">
    <ngx-spinner></ngx-spinner>
  </div>

</form>